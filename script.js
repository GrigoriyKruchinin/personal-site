/* ------------- translations ------------- */
const T = {
  ru: {
    page_title: "Ð“Ñ€Ð¸Ð³Ð¾Ñ€Ð¸Ð¹ ÐšÑ€ÑƒÑ‡Ð¸Ð½Ð¸Ð½ â€” Python Developer",
    name: "Ð“Ñ€Ð¸Ð³Ð¾Ñ€Ð¸Ð¹ ÐšÑ€ÑƒÑ‡Ð¸Ð½Ð¸Ð½",
    role: "Lead / Python Developer",
    download_resume: "ðŸ“„ Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ Ñ€ÐµÐ·ÑŽÐ¼Ðµ",
    skills_title: "ÐÐ°Ð²Ñ‹ÐºÐ¸",
    skills_backend: "Backend & Data",
    skills_brokers: "Brokers & Async",
    skills_devops: "DevOps & Cloud",
    skills_scraping: "Scraping & Integrations",
    skills_testing: "Testing & Automation",
    skills_tools: "Tools & Collaboration",
    experience_title: "ÐžÐ¿Ñ‹Ñ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹",
    footer_name: "Ð“Ñ€Ð¸Ð³Ð¾Ñ€Ð¸Ð¹ ÐšÑ€ÑƒÑ‡Ð¸Ð½Ð¸Ð½",

    /* LLC */
    llc_sub: "ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸ Ð±Ð¸Ð·Ð½ÐµÑÐ° Ð¸ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹",
    llc_role: "Lead / Python Developer",
    llc_t1_title: "Helpdesk â€” ÐµÐ´Ð¸Ð½Ð°Ñ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°",
    llc_t1_action: "Ð¡Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð» Ð¸ Ð²Ð²Ñ‘Ð» Ð¼Ð¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÐ½ÑƒÑŽ Ð¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼Ñƒ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð²Ñ…Ð¾Ð´ÑÑ‰Ð¸Ñ… ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ (email, WhatsApp, Telegram) Ñ Ð°Ð²Ñ‚Ð¾Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð¾Ð¼.",
    llc_t1_result: "Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚: Ð²Ñ€ÐµÐ¼Ñ Ð¾Ñ‚Ð²ÐµÑ‚Ð° Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸ ÑÐ¾ÐºÑ€Ð°Ñ‚Ð¸Ð»Ð¾ÑÑŒ Ð² 2.5Ã—, ÑÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð² ÑƒÐ²ÐµÐ»Ð¸Ñ‡Ð¸Ð»Ð°ÑÑŒ Ð½Ð° 60%.",
    llc_t2_title: "ÐžÐ±Ñ…Ð¾Ð´ ÐºÐ°Ð¿Ñ‡",
    llc_t2_action: "Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð» Ð¼Ð¾Ð´ÑƒÐ»ÑŒ Ð¾Ð±Ñ…Ð¾Ð´Ð° hCaptcha / gCaptcha / Cloudflare Ð² Ð¿Ð°Ð¹Ð¿Ð»Ð°Ð¹Ð½ Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³Ð°.",
    llc_t2_result: "Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚: ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³Ð° Ð²Ñ‹Ñ€Ð¾ÑÐ»Ð°, Ñ‡Ð¸ÑÐ»Ð¾ Ð¿Ð°Ð´ÐµÐ½Ð¸Ð¹ ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð² ÑÐ½Ð¸Ð·Ð¸Ð»Ð¾ÑÑŒ Ð½Ð° 35%.",
    llc_t3_title: "ÐÐ²Ñ‚Ð¾Ð·Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ PDF",
    llc_t3_action: "Ð ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð» ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð·Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ñ„Ð¾Ñ€Ð¼ Ñ Ð²Ñ‹Ð±Ð¾Ñ€Ð¾Ð¼ Ð¼ÐµÑ‚Ð¾Ð´Ð° Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð¿Ð¾ Ñ‚Ð¸Ð¿Ñƒ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°.",
    llc_t3_result: "Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚: Ð²Ñ€ÐµÐ¼Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð² ÑƒÐ¼ÐµÐ½ÑŒÑˆÐ¸Ð»Ð¾ÑÑŒ Ð² 2Ã—, ÑƒÐ¼ÐµÐ½ÑŒÑˆÐ¸Ð»Ð¾ÑÑŒ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð¾ÑˆÐ¸Ð±Ð¾Ðº.",
    llc_t4_title: "Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Telegram",
    llc_t4_action: "ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ð» Ñ†ÐµÐ½Ñ‚Ñ€Ð°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð½Ð¾Ðµ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¸ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð¿Ð¾ Ð·Ð°Ð´Ð°Ñ‡Ð°Ð¼ Ð² Telegram.",
    llc_t4_result: "Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚: Ð¿Ð¾Ð²Ñ‹ÑÐ¸Ð»Ð°ÑÑŒ Ð¿Ñ€Ð¾Ð·Ñ€Ð°Ñ‡Ð½Ð¾ÑÑ‚ÑŒ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ¾Ð² Ð¸ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ Ñ€ÐµÐ°ÐºÑ†Ð¸Ð¸ Ð½Ð° Ð¸Ð½Ñ†Ð¸Ð´ÐµÐ½Ñ‚Ñ‹.",

    /* OnlyFace */
    only_sub: "Ð¡Ð¾Ñ†Ð¸Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼Ð° Ñ Ð·Ð°Ð¼ÐµÐ½Ð¾Ð¹ Ð»Ð¸Ñ† Ð² Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾Ð¼ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸",
    only_role: "Tech Lead / Backend Developer",
    only_t1_title: "ÐœÐ¾Ð½ÐµÑ‚Ð¸Ð·Ð°Ñ†Ð¸Ñ",
    only_t1_action: "Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð» Stripe Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¸Ð» Ð¿Ð»Ð°Ñ‚Ñ‘Ð¶Ð½Ñ‹Ðµ Ð¿Ð¾Ñ‚Ð¾ÐºÐ¸ Ð´Ð»Ñ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ¾Ðº.",
    only_t1_result: "Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚: Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½Ð° Ð¼Ð¾Ð½ÐµÑ‚Ð¸Ð·Ð°Ñ†Ð¸Ñ, Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½ ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº Ð´Ð¾Ñ…Ð¾Ð´Ð°.",
    only_t2_title: "KYC",
    only_t2_action: "Ð’Ð½ÐµÐ´Ñ€Ð¸Ð» SumSub Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ Ð¸ ÑÐ½Ð¸Ð¶ÐµÐ½Ð¸Ñ Ð¼Ð¾ÑˆÐµÐ½Ð½Ð¸Ñ‡ÐµÑÑ‚Ð²Ð°.",
    only_t2_result: "Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚: Ñ€Ð¸ÑÐº Ð¼Ð¾ÑˆÐµÐ½Ð½Ð¸Ñ‡ÐµÑÑ‚Ð²Ð° ÑÑƒÑ‰ÐµÑÑ‚Ð²ÐµÐ½Ð½Ð¾ ÑÐ½Ð¸Ð¶ÐµÐ½.",
    only_t3_title: "Ð¡Ð¾Ñ†Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ñ",
    only_t3_action: "Ð”Ð¾Ð±Ð°Ð²Ð¸Ð» Google / Twitter / Telegram Ð²Ñ…Ð¾Ð´.",
    only_t3_result: "Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚: Ñ€Ð¾ÑÑ‚ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¹ Ð½Ð° ~40% Ð¿Ð¾ÑÐ»Ðµ ÑƒÐ¿Ñ€Ð¾Ñ‰ÐµÐ½Ð¸Ñ Ð²Ñ…Ð¾Ð´Ð°.",

    /* Vanger */
    vanger_sub: "ÐŸÐ»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼Ð° Ð¸ Ð¸Ð³Ñ€Ð¾Ð²Ñ‹Ðµ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ñ‹ Ñ Ð²Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½ÐµÐ¹ Ð¼Ð¾Ð½ÐµÑ‚Ð¸Ð·Ð°Ñ†Ð¸ÐµÐ¹",
    vanger_role: "Backend Developer",
    v_t1_title: "ÐšÑ€Ð¸Ð¿Ñ‚Ð¾-ÐºÐ¾ÑˆÐµÐ»Ñ‘Ðº",
    v_t1_action: "Ð Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð» ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ ÐºÐ¾ÑˆÐµÐ»ÑŒÐºÐ° Ð¸ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¹ Ð´Ð»Ñ Ð²Ð½ÑƒÑ‚Ñ€Ð¸Ð¸Ð³Ñ€Ð¾Ð²Ñ‹Ñ… Ð¿Ð¾ÐºÑƒÐ¿Ð¾Ðº.",
    v_t1_result: "Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚: Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ñ‹Ðµ Ð¸ ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ðµ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸.",
    v_t2_title: "S3-Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ",
    v_t2_action: "Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð» Yandex Cloud S3 Ð´Ð»Ñ Ð¼Ð°ÑÑˆÑ‚Ð°Ð±Ð¸Ñ€ÑƒÐµÐ¼Ð¾Ð³Ð¾ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¼ÐµÐ´Ð¸Ð°.",
    v_t2_result: "Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚: Ð½Ð°Ð´Ñ‘Ð¶Ð½Ð¾Ðµ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ñ… Ð¾Ð±ÑŠÑ‘Ð¼Ð¾Ð² ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚Ð°.",
    v_t3_title: "ÐžÐ¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ",
    v_t3_action: "ÐžÐ¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð» ÑÐµÑ€Ð²Ð¸ÑÑ‹ Ð¿Ð¾Ð´ Ð¿Ð¸ÐºÐ¾Ð²Ñ‹Ðµ Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸.",
    v_t3_result: "Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚: ÑƒÐ¼ÐµÐ½ÑŒÑˆÐµÐ½Ñ‹ Ð·Ð°Ð´ÐµÑ€Ð¶ÐºÐ¸ Ð¸ Ð¿Ð¾Ð²Ñ‹ÑˆÐµÐ½Ð° ÑƒÑÑ‚Ð¾Ð¹Ñ‡Ð¸Ð²Ð¾ÑÑ‚ÑŒ."
  },
  en: {
    page_title: "Grigorii Kruchinin â€” Python Developer",
    name: "Grigorii Kruchinin",
    role: "Lead / Python Developer",
    download_resume: "ðŸ“„ Download resume",
    skills_title: "Skills",
    skills_backend: "Backend & Data",
    skills_brokers: "Brokers & Async",
    skills_devops: "DevOps & Cloud",
    skills_scraping: "Scraping & Integrations",
    skills_testing: "Testing & Automation",
    skills_tools: "Tools & Collaboration",
    experience_title: "Work Experience",
    footer_name: "Grigorii Kruchinin",

    /* LLC */
    llc_sub: "US business registration automation and operations support",
    llc_role: "Lead / Python Developer",
    llc_t1_title: "Helpdesk â€” unified support",
    llc_t1_action: "Designed and deployed microservice platform for incoming messages (email, WhatsApp, Telegram) with auto-translation.",
    llc_t1_result: "Result: support response time improved 2.5Ã— and request handling speed increased by 60%.",
    llc_t2_title: "Captcha bypass",
    llc_t2_action: "Integrated reliable hCaptcha / gCaptcha / Cloudflare bypass module into scraping pipeline.",
    llc_t2_result: "Result: scraping stability improved; service failures reduced by ~35%.",
    llc_t3_title: "PDF autofill",
    llc_t3_action: "Implemented document autofill system selecting processing method by document type.",
    llc_t3_result: "Result: document processing time halved; fewer errors.",
    llc_t4_title: "Telegram integration",
    llc_t4_action: "Configured centralized logging and task notifications via Telegram.",
    llc_t4_result: "Result: improved process transparency and incident response speed.",

    /* OnlyFace */
    only_sub: "Real-time face-swap social platform",
    only_role: "Tech Lead / Backend Developer",
    only_t1_title: "Monetization",
    only_t1_action: "Integrated Stripe and configured payment flows for subscriptions.",
    only_t1_result: "Result: monetization launched and a stable revenue stream established.",
    only_t2_title: "KYC",
    only_t2_action: "Implemented SumSub to reduce fraud risk.",
    only_t2_result: "Result: fraud risk significantly reduced.",
    only_t3_title: "Social login",
    only_t3_action: "Added Google / Twitter / Telegram login.",
    only_t3_result: "Result: ~40% increase in signups after simplifying login.",

    /* Vanger */
    vanger_sub: "Platform and gaming products with in-app monetization",
    vanger_role: "Backend Developer",
    v_t1_title: "Crypto wallet",
    v_t1_action: "Built wallet and transaction system for in-game purchases.",
    v_t1_result: "Result: secure and stable transactions.",
    v_t2_title: "S3 storage",
    v_t2_action: "Integrated Yandex Cloud S3 for scalable media storage.",
    v_t2_result: "Result: reliable storage for large media volumes.",
    v_t3_title: "Optimization",
    v_t3_action: "Optimized services for peak loads.",
    v_t3_result: "Result: reduced latency and improved resilience."
  }
};

/* ------------- language and theme logic ------------- */
let lang = (function(){ try{return localStorage.getItem('site_lang')||'ru'}catch(e){return 'ru'} })();
const langToggleEl = document.getElementById('langToggle');
const langCapsule = document.getElementById('langCapsule');

function setLang(l){
  lang = l;
  try{ localStorage.setItem('site_lang', l); }catch(e){}
  // toggle visual slider class
  if(lang === 'en') langToggleEl.classList.add('lang-en'); else langToggleEl.classList.remove('lang-en');
  // apply translations
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if(T[lang] && T[lang][key]) el.textContent = T[lang][key];
  });
  // also update year and title
  document.getElementById('year').textContent = new Date().getFullYear();
  if(T[lang] && T[lang].page_title) document.title = T[lang].page_title;
}

// set initial
setLang(lang);

// clickable / keyboard for lang toggle
langCapsule.addEventListener('click', ()=> setLang(lang === 'ru' ? 'en' : 'ru'));
langToggleEl.addEventListener('keydown', (e)=> {
  if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); setLang(lang === 'ru' ? 'en' : 'ru'); }
});

/* theme toggle */
const themeBtn = document.getElementById('themeToggle');
(function initTheme(){
  let saved = null;
  try{ saved = localStorage.getItem('theme'); }catch(e){}
  if(saved) document.body.dataset.theme = saved;
  themeBtn.textContent = document.body.dataset.theme === 'dark' ? 'ðŸŒ™' : 'â˜€ï¸';
})();
themeBtn.addEventListener('click', ()=>{
  const next = document.body.dataset.theme === 'dark' ? 'light' : 'dark';
  document.body.dataset.theme = next;
  themeBtn.textContent = next === 'dark' ? 'ðŸŒ™' : 'â˜€ï¸';
  try{ localStorage.setItem('theme', next);}catch(e){}
});

/* ------------- reveal animations with safe fallback ------------- */
const revealEls = document.querySelectorAll('.reveal');
const io = new IntersectionObserver((entries) => {
  entries.forEach(ent => {
    if(ent.isIntersecting) ent.target.classList.add('visible');
  });
},{threshold:0.08});

revealEls.forEach(el => io.observe(el));
// fallback: if IntersectionObserver not triggering quickly, reveal all after 800ms
setTimeout(()=> revealEls.forEach(el => el.classList.add('visible')), 900);
